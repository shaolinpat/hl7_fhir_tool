@prefix sh:    <http://www.w3.org/ns/shacl#> .
@prefix rdf:   <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:  <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd:   <http://www.w3.org/2001/XMLSchema#> .
@prefix hft:   <http://example.org/hl7-fhir/> .
@prefix loinc: <http://loinc.org/> .

################################################################################
# Laboratory Observation Profile (simplified for test expectations)
# Matches HbA1c and other quantitative Observations.
################################################################################

hft:LabObservationShape
  a sh:NodeShape ;
  sh:targetClass hft:Observation ;
  sh:property [
    sh:path hft:hasCode ;
    sh:in (loinc:4548-4 loinc:2345-7 loinc:2951-2) ;
    sh:message "Laboratory Observation must have a permitted LOINC code (e.g., HbA1c 4548-4)." ;
    sh:severity sh:Violation ;
  ] ;
  sh:property [
    sh:path hft:valueDecimal ;
    sh:datatype xsd:decimal ;
    sh:minCount 1 ;
    sh:message "Laboratory Observation must include a numeric value (xsd:decimal)." ;
    sh:severity sh:Violation ;
  ] ;
  sh:property [
    sh:path hft:hasUnit ;
    sh:minCount 1 ;
    sh:message "Laboratory Observation must specify a measurement unit (hft:hasUnit)." ;
    sh:severity sh:Violation ;
  ] .
